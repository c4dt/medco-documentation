

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; MedCo Technical Documentation 0.1a documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MedCo Technical Documentation
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../system_admin/index.html">System Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MedCo Technical Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/javascript.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Transpile Unlynx
Install the following dependencies:
- Go 1.11+
- GopherJS</p>
<p>And execute the following:
go get -u github.com/lca1/medco-unlynx-js
cd “$GOPATH/src/”
To make use of the homomorphic encryption used by Unlynx we had to transpile the needed function to Javascript so to use them from within the browser. Moreover, since the decryption solves a discrete logarithm problem we had to produce a table with 10.000 entries to map points (ciphers) to the corresponting integer (plaintext). This table allowed to accelerate the otherwise very slow decription.
The <cite>gopherjsCrypto/</cite> folder is structured as follows:
- <cite>generate/</cite>: folder containing two go scripts, one to genarate private/public keys (of the webclient user) and one to generate the reverse mapping table. The generated table is stored in <cite>mappingTable/mapping.go</cite> as a go variable called  <cite>PointToInt</cite>.
- <cite>mylib/</cite>: contains the wrappers to all the needed Unlynx functions as well as the tests to check everything works properly. We had to wrap them to simplify their interface so that, when transpiled, in Javascript we could deal <strong>only with strings</strong> (and not with more cumbersome structures, e.g. abstract.Point, which gave problems when used in Javascript).
- <cite>tests/</cite>: contains the html page and javascript code to check that the transpiled functions work when called from whithin a browser. After generating the <cite>cryptolib.js</cite> and <cite>cryptolib.js.map</cite> copy them in the <cite>tests/scripts/</cite> folder and open in the browser <cite>tests/example.html</cite> to test the transpiled functions. In this folder there is also the code to test the background encryption (to avoid freezing the page while decrypting) before it <em>got integrated in the MedCo plugin</em>.
- <cite>crypto_javascript.go</cite>: script which is compiled with gopherjs to generate <cite>cryptolib.js</cite> and <cite>cryptolib.js.map</cite> with the following command:</p>
<blockquote>
<div><dl class="docutils">
<dt>sh</dt>
<dd>$ gopherjs build -m crypto_javascript.go -o cryptolib.js</dd>
</dl>
</div></blockquote>
<p>### Libraries
To transpile the Unlynx code I used the following setting:
- Installed [<cite>GopherJS 1.9-1</cite>](<a class="reference external" href="https://github.com/gopherjs/gopherjs/tree/go1.9">https://github.com/gopherjs/gopherjs/tree/go1.9</a>)
- Used [<cite>Onet</cite>](<a class="reference external" href="https://github.com/dedis/onet">https://github.com/dedis/onet</a>) on <em>master</em> branch.
- Used [<cite>Unlynx</cite>](<a class="reference external" href="https://github.com/lca1/unlynx">https://github.com/lca1/unlynx</a>) on <em>newI2B2</em> branch. I had issues in transpiling <cite>onet</cite> so I ended up in usng this version of Unlynx shich imports <cite>onet.v1</cite> instead of <cite>onet</cite>.</p>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, EPFL LCA1.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1a',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>